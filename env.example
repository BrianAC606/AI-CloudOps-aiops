# ==========================================
# AI-CloudOps AIOps 平台环境配置文件
# ==========================================

# 环境配置
ENV=development  # 可选值: development, production

# ==========================================
# 应用基础配置
# ==========================================
DEBUG=true
HOST=0.0.0.0
PORT=8080
LOG_LEVEL=INFO

# ==========================================
# LLM 大语言模型配置
# ==========================================
LLM_PROVIDER=openai  # 可选值: openai, ollama
LLM_MODEL=Qwen/Qwen2.5-32B-Instruct
LLM_TASK_MODEL=Qwen/Qwen2.5-14B-Instruct
LLM_API_KEY=sk-xxx  # 外部API密钥
LLM_BASE_URL=https://api.siliconflow.cn/v1  # 外部API基础URL
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2048
LLM_REQUEST_TIMEOUT=360

# Ollama本地模型配置（作为备用）
OLLAMA_MODEL=qwen2.5:3b
OLLAMA_BASE_URL=http://127.0.0.1:11434/v1

# ==========================================
# MCP 服务配置
# ==========================================
MCP_SERVER_URL=http://localhost:9000
MCP_TIMEOUT=30
MCP_MAX_RETRIES=3
MCP_HEALTH_CHECK_INTERVAL=30

# ==========================================
# Kubernetes 集群配置
# ==========================================
K8S_IN_CLUSTER=false  # 是否在K8s集群内运行
K8S_CONFIG_PATH=./deploy/kubernetes/config  # K8s配置文件路径
K8S_NAMESPACE=default  # 默认命名空间

# ==========================================
# Prometheus 监控配置
# ==========================================
PROMETHEUS_HOST=127.0.0.1:9090
PROMETHEUS_TIMEOUT=30

# ==========================================
# Redis 配置
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=  # Redis密码，留空表示无密码
REDIS_CONNECTION_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
REDIS_MAX_CONNECTIONS=10

# ==========================================
# 通知配置
# ==========================================
NOTIFICATION_ENABLED=true
FEISHU_WEBHOOK=https://open.feishu.cn/open-apis/bot/v2/hook/your-webhook-url

# ==========================================
# 搜索引擎配置
# ==========================================
TAVILY_API_KEY=  # Tavily搜索API密钥
TAVILY_MAX_RESULTS=5

# ==========================================
# RAG 智能助手配置
# ==========================================
RAG_VECTOR_DB_PATH=data/vector_db
RAG_COLLECTION_NAME=aiops-assistant
RAG_KNOWLEDGE_BASE_PATH=data/knowledge_base
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200
RAG_TOP_K=8
RAG_SIMILARITY_THRESHOLD=0.3
RAG_OPENAI_EMBEDDING_MODEL=Pro/BAAI/bge-m3
RAG_OLLAMA_EMBEDDING_MODEL=nomic-embed-text
RAG_MAX_CONTEXT_LENGTH=4000
RAG_TEMPERATURE=0.1
RAG_TIMEOUT=360
RAG_CACHE_EXPIRY=3600

# ==========================================
# 根因分析配置
# ==========================================
RCA_DEFAULT_TIME_RANGE=30  # 默认分析时间范围（分钟）
RCA_MAX_TIME_RANGE=1440    # 最大分析时间范围（分钟）
RCA_ANOMALY_THRESHOLD=0.65 # 异常检测阈值
RCA_CORRELATION_THRESHOLD=0.7  # 相关性阈值
RCA_MAX_RETRIES=3
RCA_TIMEOUT=30

# ==========================================
# 预测配置
# ==========================================
PREDICTION_MODEL_BASE_PATH=data/models
PREDICTION_MAX_INSTANCES=20
PREDICTION_MIN_INSTANCES=1
PREDICTION_DEFAULT_HOURS=24
PREDICTION_MAX_HOURS=168
PREDICTION_MIN_HOURS=1
PREDICTION_DEFAULT_GRANULARITY=hour
PREDICTION_DEFAULT_TARGET_UTILIZATION=0.7
PREDICTION_DEFAULT_SENSITIVITY=0.8

# ==========================================
# Docker Compose 配置
# ==========================================
# 以下配置用于docker-compose.yml中的环境变量

# 网络配置
COMPOSE_PROJECT_NAME=aiops

# 数据持久化路径
DATA_PATH=./data
LOGS_PATH=./logs
CONFIG_PATH=./config

# 服务端口配置（用于宿主机映射）
AIOPS_PORT=8080
MCP_PORT=9000
PROMETHEUS_PORT=9090
REDIS_PORT=6379
OLLAMA_PORT=11434

# ==========================================
# 安全配置
# ==========================================
# 生产环境建议设置的安全配置

# JWT密钥（如果使用）
# JWT_SECRET=your-jwt-secret-key

# API访问限制
# API_RATE_LIMIT=100  # 每分钟请求次数

# CORS配置
# CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ==========================================
# 开发配置
# ==========================================
# 仅在开发环境使用的配置

# 是否跳过LLM测试
TESTING_SKIP_LLM_TESTS=false

# 是否启用自动重载
AUTO_RELOAD=false

# 调试模式
ENABLE_DEBUG_ENDPOINTS=false